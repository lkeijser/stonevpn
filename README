= Description =
StoneVPN - Easy OpenVPN certificate and configuration management

Author: LÃ©on Keijser - keijser@stone-it.com



= Installation =
* run 'python setup.py install' as root

* run 'python setup.py install_docs' to install example config and
  documentation in /usr/share/StoneVPN

* copy /usr/share/StoneVPN/example/stonevpn.conf to /etc

* Make the necessary adjustments in /etc/stonevpn.conf

* Make the necessary adjustments in your openssl.cnf (StoneVPN
  should say what they are)

* Optional: patch pyOpenSSL to have CRL support (see below)

* Run stonevpn :)


= Custom pyOpenSSL =
For StoneVPN to work optimally, you will need to download and
patch the latest pyOpenSSL. The extra functionality is CRL
management.

First, download pyOpenSSL from http://pypi.python.org/pypi/pyOpenSSL/0.10

$ wget http://pypi.python.org/packages/source/p/pyOpenSSL/pyOpenSSL-0.10.tar.gz#md5=34db8056ec53ce80c7f5fc58bee9f093

Then, change into the newly created directory and patch pyOpenSSL with 
the patchfile included with StoneVPN:

$ patch -p0 < /usr/share/StoneVPN/patches/pyOpenSSL-0.9-crl_and_revoked.patch

Yes, the patch was created for pyOpenSSL-0.9 but works fine with 0.10

Now compile pyOpenSSL (you will need at least the openssl- and
python-devel packages installed):

$ python ./setup.py install

After this is done, StoneVPN should work with CRL.


= RPM =
StoneVPN is now included in EPEL, Fedora 11, 12 and rawhide, so following
instructions are only for those who are on different distro's:

I've included a SPEC file so you can build an RPM yourself. To
do this i assume you have a working rpmbuild environment and have
the StoneVPN tarball located in ~/rpmbuild/SOURCES/stonevpn-%version.tar.gz

For example

$ mv /usr/share/StoneVPN/rpm/stonevpn.spec ~/rpmbuild/SPECS

Build the RPMs:

$ cd ~/rpmbuild/SPECS
$ rpmbuild -ba stonevpn.spec

If all goes well this will leave you with a stonevpn-%version.el5.noarch.rpm
file which you can then use to install on various machines :)

