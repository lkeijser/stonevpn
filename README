= Description =
StoneVPN - Easy OpenVPN certificate and configuration management

Author: LÃ©on Keijser - keijser@stone-it.com


= Installation =
* Move stonevpn to /usr/local/bin (make sure it's chmod +x)

* Move stonevpn.conf to /etc

* Make the necessary adjustments in /etc/stonevpn.conf

* Make the necessary adjustments in your openssl.cnf (StoneVPN
should say what they are)

* Optional: patch pyOpenSSL to have CRL support (see below)

* Run stonevpn :)


= Custom pyOpenSSL =
For StoneVPN to work optimally, you will need to download and
patch the latest pyOpenSSL. The extra functionality is CRL
management.

First, download the latest pyOpenSSL:

http://sourceforge.net/project/showfiles.php?group_id=31249

Untar/gunzip it. Then download this patch to the extracted dir:

http://arnaud.desmons.free.fr/pyOpenSSL-0.8-pkcs12.patch

Patch it:

$ patch -p1 < pyOpenSSL-0.8-pkcs12.patch

Now the same person who made the above patch, also created the
CRL patch. Unfortunately it doesn't apply anymore against 0.8 so
i've made a corrected version which is included with StoneVPN.

You will need to copy pyOpenSSL-0.8-crl.patch to the pyOpenSSL
directory and apply it as well:

$ patch -p1 < pyOpenSSL-0.8-crl.patch

Now compile pyOpenSSL (you will need at least the openssl- and
python-devel packages installed):

$ python ./setup.py install

After this is done, StoneVPN should work with CRL.


= RPM =
I've included a SPEC file so you can build an RPM yourself. To
do this i assume you have a working rpmbuild environment and have
StoneVPN located in /StoneVPN-%version , and created a tar.gz file.

For example

$ tar czvf stonevpn.tar.gz ~/StoneVPN-0.4

Move the file to your rpmbuild environment:

$ mv stonevpn.tar.gz ~/rpmbuild/SOURCES

Move the SPEC file there as well:

$ mv stonevpn.spec ~/rpmbuild/SPECS

Build the RPMs:

$ cd ~/rpmbuild/SPECS
$ rpmbuild -ba stonevpn.spec

If all goes well this will leave you with a StoneVPN-0.4-1.el5.noarch.rpm
file which you can then use to install on various machines :)

